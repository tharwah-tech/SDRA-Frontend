<!-- Interview List Component HTML with Angular Material Table -->
<div class="interview-list-container">
  <!-- Header Section -->
  <div class="flex flex-col md:flex-row justify-start md:justify-between items-center mb-6">
    <div class="flex items-center gap-3 mb-4 md:mb-0">
      <h2 class="list-title m-0">Interview List</h2>
      <div class="text-gray-500 text-sm bg-gray-100 px-3 py-1 rounded-full" *ngIf="totalItems > 0">
        {{ totalItems }} {{ totalItems === 1 ? 'Interview' : 'Interviews' }}
      </div>
    </div>
    <div class="flex flex-row justify-start md:justify-end items-center w-full md:w-auto gap-4">
      <!-- Status Filter -->
      <mat-form-field appearance="outline" class="!w-auto !m-0">
        <mat-select
          [value]="selectedStatus()"
          (selectionChange)="onStatusFilterChange($event.value)"
          class="min-w-[160px]"
        >
          <mat-option *ngFor="let option of statusOptions" [value]="option.value">
            {{ option.label }}
          </mat-option>
        </mat-select>
        <mat-icon matPrefix class="!flex !items-center opacity-60">
          <img
            src="../../../../../../../assets/images/icons/filter-funnel-01.svg"
            alt="filter-icon"
            class="w-5 h-5"
          />
        </mat-icon>
      </mat-form-field>

      <!-- New Interview Button -->
      <button
        mat-flat-button
        color="primary"
        class="!h-[48px] !rounded-lg !px-6 !flex !items-center !gap-2 !shadow-sm hover:!shadow-md transition-shadow"
        (click)="onNewInterview()"
      >
        <mat-icon class="!w-5 !h-5">add</mat-icon>
        <span>New Interview</span>
      </button>
    </div>
  </div>    <!-- Loading State -->
  <div *ngIf="loading$ | async" class="loading-state bg-white/50 rounded-lg flex items-center justify-center p-12">
    <div class="flex flex-col items-center gap-4">
      <mat-spinner diameter="40" class="!text-primary"></mat-spinner>
      <span class="text-gray-600">Loading interviews...</span>
    </div>
  </div>

  <!-- Error State -->
  <div *ngIf="error$ | async as error" class="error-state bg-red-50 border-red-100 rounded-lg p-6">
    <div class="error-content flex items-center gap-3 mb-4">
      <mat-icon class="text-red-500">error_outline</mat-icon>
      <span class="text-red-700">Error loading interviews: {{ error }}</span>
    </div>
    <button mat-flat-button color="warn" (click)="loadInterviews()" class="!rounded-lg !py-2 !px-4">
      <div class="flex items-center gap-2">
        <mat-icon>refresh</mat-icon>
        <span>Retry</span>
      </div>
    </button>
  </div>    <!-- Table Container -->
  <div *ngIf="!(loading$ | async)" class="table-container">
    
    <!-- Empty State -->
    <div *ngIf="!hasInterviews" class="empty-state bg-white rounded-lg shadow-sm p-12 text-center">
      <div class="bg-gray-50 rounded-full p-4 mb-6 inline-flex items-center justify-center">
        <mat-icon class="empty-icon text-gray-400 !w-8 !h-8 !text-3xl">assignment</mat-icon>
      </div>
      <h3 class="text-xl font-semibold text-gray-900 mb-2">No interviews found</h3>
      <p class="text-gray-600 mb-8 max-w-md mx-auto leading-relaxed">Get started by creating your first interview to begin evaluating candidates.</p>
      <button
        mat-flat-button
        color="primary"
        class="new-interview-button !py-3 !px-6 !rounded-lg !flex !items-center !gap-2 !mx-auto"
        (click)="onNewInterview()"
      >
        <mat-icon class="!w-5 !h-5">add</mat-icon>
        <span>Create New Interview</span>
      </button>
    </div>

    <!-- Angular Material Table -->
    <mat-table 
      *ngIf="hasInterviews"
      [dataSource]="dataSource" 
      matSort
      class="interview-table"
      matSortActive="date"
      matSortDirection="desc"
    >
      
      <!-- Candidate Name Column -->
      <ng-container matColumnDef="candidateName">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="candidate-name-header">
          Candidate Name
        </mat-header-cell>
        <mat-cell *matCellDef="let interview" class="candidate-name-cell">
          <span class="candidate-text">{{ interview.candidateName }}</span>
        </mat-cell>
      </ng-container>

      <!-- Job Title Column -->
      <ng-container matColumnDef="jobTitle">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="job-title-header">
          Job Title
        </mat-header-cell>
        <mat-cell *matCellDef="let interview" class="job-title-cell">
          <a href="#" class="job-link" (click)="onViewJob(interview, $event)">
            {{ interview.jobTitle }}
          </a>
        </mat-cell>
      </ng-container>

      <!-- Date Column -->
      <ng-container matColumnDef="date">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="date-header">
          Date
        </mat-header-cell>
        <mat-cell *matCellDef="let interview" class="date-cell">
          <span class="date-text">{{ formatDate(interview.creationDate) }}</span>
        </mat-cell>
      </ng-container>

      <!-- Status Column -->
      <ng-container matColumnDef="status">
        <mat-header-cell *matHeaderCellDef mat-sort-header class="status-header">
          Status
        </mat-header-cell>
        <mat-cell *matCellDef="let interview" class="status-cell">
          <span
            class="status-badge"
            [ngClass]="getStatusClass(interview.status)"
          >
            {{ getStatusDisplayText(interview.status) }}
          </span>
        </mat-cell>
      </ng-container>

      <!-- Actions Column -->
      <ng-container matColumnDef="actions">
        <mat-header-cell *matHeaderCellDef class="actions-header">
          Actions
        </mat-header-cell>
        <mat-cell *matCellDef="let interview" class="actions-cell">
          <div class="action-buttons">
            <button
              mat-icon-button
              matTooltip="View interview"
              (click)="onViewInterview(interview)"
            >
              <mat-icon>visibility</mat-icon>
            </button>

            <button
              mat-icon-button
              matTooltip="Share interview"
              (click)="onShareInterview(interview)"
            >
              <mat-icon>share</mat-icon>
            </button>

            <!-- Uncomment if needed -->
            <!-- <button
              mat-icon-button
              matTooltip="Play interview"
              (click)="onPlayInterview(interview)"
            >
              <mat-icon>play_arrow</mat-icon>
            </button> -->

            <!-- <button
              mat-icon-button
              matTooltip="Delete interview"
              (click)="onDeleteInterview(interview)"
            >
              <mat-icon>delete</mat-icon>
            </button> -->
          </div>
        </mat-cell>
      </ng-container>

      <!-- Table Header and Rows -->
      <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
      <mat-row 
        *matRowDef="let row; columns: displayedColumns;" 
        class="interview-row"
      ></mat-row>
    </mat-table>

    <!-- Angular Material Paginator -->
    <div class="flex justify-end w-full bg-white rounded-b-lg border-t border-gray-200">
      <mat-paginator
        *ngIf="showPaginator"
        [length]="totalItems"
        [pageSize]="pageSize"
        [pageSizeOptions]="pageSizeOptions"
        [pageIndex]="pageIndex"
        (page)="onPageChange($event)"
        showFirstLastButtons
        class="interview-paginator !bg-transparent"
        aria-label="Select page of interviews"
      >
      </mat-paginator>
    </div>
  </div>
</div>